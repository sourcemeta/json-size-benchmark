<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ metadata.description }}</title>
  <link rel="stylesheet" href="style.min.css">
  <style>
  body {
    max-width: 55rem;
  }
  </style>
</head>
<body>
  <header>
    <h2>{{ metadata.description }}</h2>
    <p>An open-source research project by <a href="{{ metadata.organization.url }}">{{ metadata.organization.name }}</a></p>
    <nav>
      <a href="{{ metadata.homepage }}">Home</a>
      <a href="{{ metadata.repository.url }}" target="_blank">GitHub</a>
      <a href="mailto:{{ metadata.author.email }}">Contact</a>
    </nav>
  </header>
  <main>
    <br>

    <details>
      <summary>Table of Contents</summary>
      <ul>
        {{#each data}}
        <li><a href="#{{id}}">{{  title }}</a></li>
        {{/each}}
      </ul>
    </details>

    {{#each data}}
    <section id="{{id}}">
      <h3><a href="#{{id}}">{{title}}</a></h3>

      <p>The input document, origin and schema definitions for this case can be seen on
      <a target="_blank" href="{{ ../metadata.repository.url }}/blob/{{ ../context.branch }}/benchmark/{{ id }}">GitHub</a>.</p>

      <canvas id="canvas-{{id}}"></canvas>
      <table>
        <thead>
          <tr>
            <th>Name</th>

            {{#each datasets}}
            <th>{{ label }}</th>
            {{/each}}
          </tr>
        </thead>
        <tbody>
          {{#each labels}}
          <tr>
            <td>{{ this }}</td>
            {{#each ../datasets}}
            <td>{{ itemAt data @../index }}</td>
            {{/each}}
          </tr>
          {{/each}}
        </tbody>
      </table>

      <!-- TODO: Link to schemas and output files? -->

      <details>
        <summary>Implementations and Versions</summary>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Version</th>
            </tr>
          </thead>
          <tbody>
            {{#each labels}}
            <tr>
              <td>{{this}}</td>
              <td>{{ itemAt ../versions @index }}</td>
            </tr>
            {{/each}}
            {{#each datasets}}
            {{#compare label "!=" "Uncompressed"}}
            <tr>
              <td>{{label}}</td>
              <td>{{version}}</td>
            </tr>
            {{/compare}}
            {{/each}}
          </tbody>
        </table>
      </details>
    </section>
    {{/each}}

    <h2>Citations</h2>
    <p>To cite this work, please use the following <a href="http://www.bibtex.org">BibTeX</a> entry:</p>
    <pre class="highlight"><code>@online{sourcemeta-json-size-benchmark,
  title = {{append '' '{'}}{{ metadata.description }}{{append '' '}'}},
  author = {{append '' '{'}}{{ metadata.author.name }}{{append '' '}'}},
  organization = {{append '' '{'}}{{ metadata.organization.name }}{{append '' '}'}},
  year = {{append '' '{'}}{{ year }}{{append '' '}'}},
  date = {{append '' '{'}}{{ timestamp }}{{append '' '}'}},
  url = {{append '' '{'}}{{ metadata.homepage }}{{append '' '}'}}
}</code></pre>
  </main>

  <footer>
    <p>Copyright <a href="{{ metadata.author.url }}">{{ metadata.author.name }}</a> © {{ year }} • All rights reserved</p>
  </footer>

  <script id="data" type="application/json">{{{ JSONstringify data }}}</script>
  <script src="app.min.js"></script>
</body>
</html>
